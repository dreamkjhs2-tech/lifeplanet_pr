<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라플 소식</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, sans-serif; margin: 0; padding: 20px; background-color: #fff; }
        
        /* 헤더 스타일 */
        .header-title { font-size: 20px; font-weight: bold; color: #00a362; margin-bottom: 24px; display: flex; align-items: center; gap: 8px; }
        .header-title::before { content: ''; display: inline-block; width: 4px; height: 20px; background-color: #00a362; border-radius: 2px; }

        .news-list { display: flex; flex-direction: column; gap: 20px; }
        .news-item { display: flex; gap: 16px; text-decoration: none; color: inherit; padding-bottom: 16px; border-bottom: 1px solid #f2f2f2; }

        /* 썸네일 원복: 블러 제거, 깔끔한 contain 방식 */
        .thumbnail-box {
            width: 100px;
            height: 100px;
            min-width: 100px;
            border-radius: 8px;
            overflow: hidden;
            background-color: #f8f8f8;
            border: 1px solid #eee;
        }
        .thumbnail-box img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* 양끝이 잘리지 않게 조정 */
        }

        .news-content { flex: 1; display: flex; flex-direction: column; gap: 6px; justify-content: center; }
        .news-title { font-size: 16px; font-weight: 600; line-height: 1.4; color: #222; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .news-meta { font-size: 13px; color: #888; }
        
        /* 상단 노출 아이템 강조 (선택사항) */
        .is-top { background-color: #f9fffb; border-bottom: 2px solid #00a362; padding: 12px; border-radius: 12px; }
    </style>
</head>
<body>

    <div class="header-title">라플 소식</div>

    <div id="news-list" class="news-list">
        </div>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbxt8xAvyoKzTKkKELm1PrD7vsuA3MG1NZtLkiH2ke1zhFJ3ogMedUZjYcXRaHYBlY7rvQ/exec";

        async function getNews() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();
                const listEl = document.getElementById('news-list');
                listEl.innerHTML = ''; 

                data.forEach(item => {
                    // 상단노출여부에 따른 클래스 처리
                    const topClass = item['상단노출여부'] === 'Y' ? 'is-top' : '';

                    const html = `
                        <a href="${item['기사URL']}" class="news-item ${topClass}" target="_blank">
                            <div class="thumbnail-box">
                                <img src="${item['이미지URL'] || 'https://via.placeholder.com/100?text=No+Image'}" alt="news">
                            </div>
                            <div class="news-content">
                                <div class="news-title">${item['제목']}</div>
                                <div class="news-meta">${item['언론사']} · ${item['시간']}</div>
                            </div>
                        </a>
                    `;
                    listEl.insertAdjacentHTML('beforeend', html);
                });
            } catch (e) {
                document.getElementById('news-list').innerHTML = "소식을 불러오는 중 오류가 발생했습니다.";
            }
        }

        getNews();
    </script>
</body>
</html>